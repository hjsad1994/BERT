# ğŸ“ Complete Folder Structure

## ğŸ¯ Overview

Dá»± Ã¡n Ä‘Æ°á»£c tá»• chá»©c thÃ nh 2 approaches riÃªng biá»‡t vá»›i folders hoÃ n toÃ n tÃ¡ch biá»‡t:

```
D:\BERT\
â”‚
â”œâ”€â”€ ğŸ“ single_label/          (Single-Label ABSA - 93% F1)
â”‚   â”œâ”€â”€ training_logs/        ğŸ“ Training logs
â”‚   â”œâ”€â”€ analysis_results/     ğŸ“Š Analysis & visualizations
â”‚   â”œâ”€â”€ error_analysis_results/  ğŸ” Error analysis
â”‚   â”œâ”€â”€ models/              ğŸ’¾ Trained models
â”‚   â”œâ”€â”€ results/             ğŸ“„ Evaluation reports
â”‚   â”œâ”€â”€ train.py             ğŸš€ Main training
â”‚   â”œâ”€â”€ config_single.yaml   âš™ï¸ Configuration
â”‚   â””â”€â”€ ... (utilities)
â”‚
â”œâ”€â”€ ğŸ“ multi_label/           (Multi-Label ABSA - 96% F1) â­
â”‚   â”œâ”€â”€ training_logs/        ğŸ“ Training logs
â”‚   â”œâ”€â”€ analysis_results/     ğŸ“Š Analysis & visualizations
â”‚   â”œâ”€â”€ error_analysis_results/  ğŸ” Error analysis
â”‚   â”œâ”€â”€ models/              ğŸ’¾ Trained models
â”‚   â”œâ”€â”€ results/             ğŸ“„ Evaluation reports
â”‚   â”œâ”€â”€ train_multilabel_focal_contrastive.py  ğŸš€ Main training
â”‚   â”œâ”€â”€ config_multi.yaml    âš™ï¸ Configuration
â”‚   â””â”€â”€ ... (models, utilities)
â”‚
â”œâ”€â”€ ğŸ“ data/                  (Shared data)
â”œâ”€â”€ ğŸ“ docs/                  (Documentation)
â”œâ”€â”€ ğŸ“ backups/               (Backups)
â”‚
â””â”€â”€ ğŸ“„ Documentation files    (README, guides, etc.)
```

---

## ğŸ“‚ Folder Purposes

### **training_logs/** (Both folders)

**Purpose:** LÆ°u training logs vá»›i timestamp

**Contents:**
```
training_log_20251020_180530.txt
training_log_20251020_190123.txt
```

**Format:** `training_log_YYYYMMDD_HHMMSS.txt`

**What's logged:**
- Training progress
- Loss values per epoch
- Validation metrics
- System information
- Errors/warnings

---

### **models/** (Both folders)

**Purpose:** LÆ°u trained models

**Single-Label:**
```
single_label/models/
â””â”€â”€ finetuned_visobert_single/
    â”œâ”€â”€ config.json
    â”œâ”€â”€ pytorch_model.bin
    â”œâ”€â”€ tokenizer_config.json
    â””â”€â”€ ...
```

**Multi-Label:**
```
multi_label/models/
â””â”€â”€ multilabel_focal_contrastive/
    â”œâ”€â”€ best_model.pt
    â”œâ”€â”€ checkpoint_epoch_1.pt
    â”œâ”€â”€ checkpoint_epoch_2.pt
    â””â”€â”€ ...
```

---

### **results/** (Both folders)

**Purpose:** LÆ°u evaluation reports & predictions

**Single-Label:**
```
single_label/results/
â”œâ”€â”€ evaluation_report_single.txt    (Detailed metrics)
â””â”€â”€ test_predictions_single.csv     (Predictions)
```

**Multi-Label:**
```
multi_label/results/
â”œâ”€â”€ evaluation_report_multi.txt     (Detailed metrics)
â”œâ”€â”€ test_predictions_multi.csv      (Predictions)
â””â”€â”€ test_results_focal_contrastive.json  (JSON results)
```

---

### **analysis_results/** (Both folders)

**Purpose:** LÆ°u visualization & analysis

**Generated by:** `analyze_results.py`

**Contents:**
```
analysis_results/
â”œâ”€â”€ confusion_matrices_all_aspects.png
â”œâ”€â”€ confusion_matrix_overall.png
â”œâ”€â”€ metrics_comparison.png
â”œâ”€â”€ accuracy_by_aspect.png
â”œâ”€â”€ f1_score_by_aspect.png
â”œâ”€â”€ precision_by_aspect.png
â”œâ”€â”€ recall_by_aspect.png
â”œâ”€â”€ sample_distribution.png
â”œâ”€â”€ metrics_heatmap.png
â”œâ”€â”€ summary_table.png
â””â”€â”€ detailed_analysis_report.txt
```

---

### **error_analysis_results/** (Both folders)

**Purpose:** LÆ°u error analysis & hard cases

**Generated by:** `analyze_nhung_errors.py` (single-label)

**Contents:**
```
error_analysis_results/
â”œâ”€â”€ all_errors_detailed.csv          (All errors)
â”œâ”€â”€ aspect_error_analysis.csv        (By aspect)
â”œâ”€â”€ sentiment_error_analysis.csv     (By sentiment)
â”œâ”€â”€ aspect_error_rates.png
â”œâ”€â”€ sentiment_error_rates.png
â”œâ”€â”€ confusion_matrix.png
â”œâ”€â”€ confusion_patterns.csv
â”œâ”€â”€ hard_cases.csv                   (Hardest examples)
â”œâ”€â”€ errors_summary_by_aspect.csv
â”œâ”€â”€ error_analysis_report.txt
â””â”€â”€ improvement_suggestions.txt
```

---

## ğŸš€ Usage

### **Single-Label:**

**Training:**
```bash
python single_label\train.py --config single_label\config_single.yaml
```

**Outputs:**
- `single_label/training_logs/training_log_*.txt`
- `single_label/models/finetuned_visobert_single/`
- `single_label/results/evaluation_report_single.txt`

**Analysis:**
```bash
python single_label\analyze_results.py
```

**Outputs:**
- `single_label/analysis_results/*.png`
- `single_label/analysis_results/detailed_analysis_report.txt`

---

### **Multi-Label:**

**Training:**
```bash
python multi_label\train_multilabel_focal_contrastive.py --epochs 8 --focal-weight 0.7 --contrastive-weight 0.3
```

**Outputs:**
- Console logs (can redirect to file)
- `multi_label/models/multilabel_focal_contrastive/`
- `multi_label/results/test_results_focal_contrastive.json`

---

## ğŸ“Š Log Management

### **Training Logs:**

**Automatic:** Single-label tá»± Ä‘á»™ng táº¡o log file  
**Manual:** Multi-label cáº§n redirect output

**Multi-label logging:**
```bash
# Save logs to file
python multi_label\train_multilabel_focal_contrastive.py ... > multi_label\training_logs\log_$(date +%Y%m%d_%H%M%S).txt 2>&1
```

**Or Windows:**
```bash
python multi_label\train_multilabel_focal_contrastive.py ... > multi_label\training_logs\log.txt 2>&1
```

---

## ğŸ§¹ Clean Separation

**Advantages:**
- âœ… Each approach has its own folders
- âœ… No confusion between single/multi results
- âœ… Easy to compare both approaches
- âœ… Clean git commits
- âœ… Easy to archive/backup separately

**Each approach is completely independent!**

---

## ğŸ“‹ Checklist Before Training

### **Single-Label:**
- [ ] Data files exist in `data/`
- [ ] Config paths point to `single_label/` folders
- [ ] Folders created: `training_logs/`, `models/`, `results/`
- [ ] Run from root: `D:\BERT\`

### **Multi-Label:**
- [ ] Data files exist in `data/`
- [ ] Config paths point to `multi_label/` folders
- [ ] Folders created: `training_logs/`, `models/`, `results/`
- [ ] Run from root: `D:\BERT\`

---

## ğŸ¯ Summary

**Complete separation between single-label and multi-label:**

```
single_label/
â”œâ”€â”€ training_logs/     âœ… Created
â”œâ”€â”€ models/           âœ… Created
â”œâ”€â”€ results/          âœ… Created
â”œâ”€â”€ analysis_results/ âœ… Created
â””â”€â”€ error_analysis_results/ âœ… Created

multi_label/
â”œâ”€â”€ training_logs/     âœ… Created
â”œâ”€â”€ models/           âœ… Created
â”œâ”€â”€ results/          âœ… Created
â”œâ”€â”€ analysis_results/ âœ… Created
â””â”€â”€ error_analysis_results/ âœ… Created
```

**Configs updated:** âœ…  
**Paths updated:** âœ…  
**Ready to train:** âœ…

ğŸ¯ **Má»i thá»© Ä‘Ã£ tÃ¡ch biá»‡t hoÃ n toÃ n!**
