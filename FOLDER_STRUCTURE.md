# 📁 Complete Folder Structure

## 🎯 Overview

Dự án được tổ chức thành 2 approaches riêng biệt với folders hoàn toàn tách biệt:

```
D:\BERT\
│
├── 📁 single_label/          (Single-Label ABSA - 93% F1)
│   ├── training_logs/        📝 Training logs
│   ├── analysis_results/     📊 Analysis & visualizations
│   ├── error_analysis_results/  🔍 Error analysis
│   ├── models/              💾 Trained models
│   ├── results/             📄 Evaluation reports
│   ├── train.py             🚀 Main training
│   ├── config_single.yaml   ⚙️ Configuration
│   └── ... (utilities)
│
├── 📁 multi_label/           (Multi-Label ABSA - 96% F1) ⭐
│   ├── training_logs/        📝 Training logs
│   ├── analysis_results/     📊 Analysis & visualizations
│   ├── error_analysis_results/  🔍 Error analysis
│   ├── models/              💾 Trained models
│   ├── results/             📄 Evaluation reports
│   ├── train_multilabel_focal_contrastive.py  🚀 Main training
│   ├── config_multi.yaml    ⚙️ Configuration
│   └── ... (models, utilities)
│
├── 📁 data/                  (Shared data)
├── 📁 docs/                  (Documentation)
├── 📁 backups/               (Backups)
│
└── 📄 Documentation files    (README, guides, etc.)
```

---

## 📂 Folder Purposes

### **training_logs/** (Both folders)

**Purpose:** Lưu training logs với timestamp

**Contents:**
```
training_log_20251020_180530.txt
training_log_20251020_190123.txt
```

**Format:** `training_log_YYYYMMDD_HHMMSS.txt`

**What's logged:**
- Training progress
- Loss values per epoch
- Validation metrics
- System information
- Errors/warnings

---

### **models/** (Both folders)

**Purpose:** Lưu trained models

**Single-Label:**
```
single_label/models/
└── finetuned_visobert_single/
    ├── config.json
    ├── pytorch_model.bin
    ├── tokenizer_config.json
    └── ...
```

**Multi-Label:**
```
multi_label/models/
└── multilabel_focal_contrastive/
    ├── best_model.pt
    ├── checkpoint_epoch_1.pt
    ├── checkpoint_epoch_2.pt
    └── ...
```

---

### **results/** (Both folders)

**Purpose:** Lưu evaluation reports & predictions

**Single-Label:**
```
single_label/results/
├── evaluation_report_single.txt    (Detailed metrics)
└── test_predictions_single.csv     (Predictions)
```

**Multi-Label:**
```
multi_label/results/
├── evaluation_report_multi.txt     (Detailed metrics)
├── test_predictions_multi.csv      (Predictions)
└── test_results_focal_contrastive.json  (JSON results)
```

---

### **analysis_results/** (Both folders)

**Purpose:** Lưu visualization & analysis

**Generated by:** `analyze_results.py`

**Contents:**
```
analysis_results/
├── confusion_matrices_all_aspects.png
├── confusion_matrix_overall.png
├── metrics_comparison.png
├── accuracy_by_aspect.png
├── f1_score_by_aspect.png
├── precision_by_aspect.png
├── recall_by_aspect.png
├── sample_distribution.png
├── metrics_heatmap.png
├── summary_table.png
└── detailed_analysis_report.txt
```

---

### **error_analysis_results/** (Both folders)

**Purpose:** Lưu error analysis & hard cases

**Generated by:** `analyze_nhung_errors.py` (single-label)

**Contents:**
```
error_analysis_results/
├── all_errors_detailed.csv          (All errors)
├── aspect_error_analysis.csv        (By aspect)
├── sentiment_error_analysis.csv     (By sentiment)
├── aspect_error_rates.png
├── sentiment_error_rates.png
├── confusion_matrix.png
├── confusion_patterns.csv
├── hard_cases.csv                   (Hardest examples)
├── errors_summary_by_aspect.csv
├── error_analysis_report.txt
└── improvement_suggestions.txt
```

---

## 🚀 Usage

### **Single-Label:**

**Training:**
```bash
python single_label\train.py --config single_label\config_single.yaml
```

**Outputs:**
- `single_label/training_logs/training_log_*.txt`
- `single_label/models/finetuned_visobert_single/`
- `single_label/results/evaluation_report_single.txt`

**Analysis:**
```bash
python single_label\analyze_results.py
```

**Outputs:**
- `single_label/analysis_results/*.png`
- `single_label/analysis_results/detailed_analysis_report.txt`

---

### **Multi-Label:**

**Training:**
```bash
python multi_label\train_multilabel_focal_contrastive.py --epochs 8 --focal-weight 0.7 --contrastive-weight 0.3
```

**Outputs:**
- Console logs (can redirect to file)
- `multi_label/models/multilabel_focal_contrastive/`
- `multi_label/results/test_results_focal_contrastive.json`

---

## 📊 Log Management

### **Training Logs:**

**Automatic:** Single-label tự động tạo log file  
**Manual:** Multi-label cần redirect output

**Multi-label logging:**
```bash
# Save logs to file
python multi_label\train_multilabel_focal_contrastive.py ... > multi_label\training_logs\log_$(date +%Y%m%d_%H%M%S).txt 2>&1
```

**Or Windows:**
```bash
python multi_label\train_multilabel_focal_contrastive.py ... > multi_label\training_logs\log.txt 2>&1
```

---

## 🧹 Clean Separation

**Advantages:**
- ✅ Each approach has its own folders
- ✅ No confusion between single/multi results
- ✅ Easy to compare both approaches
- ✅ Clean git commits
- ✅ Easy to archive/backup separately

**Each approach is completely independent!**

---

## 📋 Checklist Before Training

### **Single-Label:**
- [ ] Data files exist in `data/`
- [ ] Config paths point to `single_label/` folders
- [ ] Folders created: `training_logs/`, `models/`, `results/`
- [ ] Run from root: `D:\BERT\`

### **Multi-Label:**
- [ ] Data files exist in `data/`
- [ ] Config paths point to `multi_label/` folders
- [ ] Folders created: `training_logs/`, `models/`, `results/`
- [ ] Run from root: `D:\BERT\`

---

## 🎯 Summary

**Complete separation between single-label and multi-label:**

```
single_label/
├── training_logs/     ✅ Created
├── models/           ✅ Created
├── results/          ✅ Created
├── analysis_results/ ✅ Created
└── error_analysis_results/ ✅ Created

multi_label/
├── training_logs/     ✅ Created
├── models/           ✅ Created
├── results/          ✅ Created
├── analysis_results/ ✅ Created
└── error_analysis_results/ ✅ Created
```

**Configs updated:** ✅  
**Paths updated:** ✅  
**Ready to train:** ✅

🎯 **Mọi thứ đã tách biệt hoàn toàn!**
